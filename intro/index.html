<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8" />
<title>CSS Variables: var(--subtitle);</title>
<link href="../csss/slideshow.css" rel="stylesheet" />
<link href="../csss/reusable.css" rel="stylesheet" />
<link href="../shared/intro-outro.css" rel="stylesheet" />
<link href="prism.css" rel="stylesheet" />
<link href="theme.css" rel="stylesheet" />
<link href="talk.css" rel="stylesheet" />

</head>
<body>

<header id="intro" class="slide dont-resize" data-source="flickr.com/photos/billward/16601966117">
	<h1>
		An Introduction to Modern Web Technologies
		<span class="note">HTML, CSS, JS, SVG</span>
	</h1>
	<p class="attribution">By <a href="http://lea.verou.me">Lea Verou</a> (<a href="http://twitter.com/leaverou">@LeaVerou</a>)</p>
</header>

<section id="html">
	<header class="image slide" title="HTML" style="background-image: url(img/htmlwallpaper.jpg)"></header>

	<article class="slide syntax-breakdown">
		<code>
			Hello <span title="Start tag">&lt;em></span><span title="Element content" data-index="1">world</span><span title="End tag">&lt;/em></span>!
		</code>
		<a data-html="code" target="_blank" class="delayed">Open page in new tab</a>
	</article>

	<article class="slide" title="Browser dev tools">
		<img src="img/inspector.png" alt="">
		<details class="notes">
			<p>Note that even if we don‚Äôt add <code>&lt;html></code>, <code>&lt;head></code>, and <code>&lt;body></code> elements, the browser will do it for us</p>
		</details>
	</article>

	<article class="slide">

	</article>
</section>

<section>
	<article class="demo slide" id="button">
		<p class="hint">Theming by class, by style, box-shadow transition | default default values</p>
		<div data-edit="contents css">
			<button>Click me</button>
			<button class="pink">Click me</button>
		</div>

		<style data-slide>
			button {
				border: .1em solid black;
				background: transparent;
				color: black;
			}

			button:hover {
				background: black;
				color: white;
			}

			button.pink {
				border-color: #f06;
				color: #f06;
			}

			button.pink:hover {
				background: #f06;
				color: white;
			}
		</style>
		<style data-slide>
			button {
				border-radius: .3em;
				padding: 0 .5em;
				font-weight: bold;
				font-size: 180%;
				margin: .2em;
			}
		</style>
	</article>

	<article class="takeaway slide">
		<h1>CSS Variables work like<br>normal CSS properties</h1>
	</article>

	<article class="takeaway slide">
		<h1>CSS Variables enable theming<br> independent of CSS structure</h1>
	</article>

	<article class="demo slide" id="inheritance">
		<p class="hint">inheritance, cancel inheritance, inherit keyword</p>
		<style data-slide data-scope=".blocks">
			* {
				outline: var(--outline);
			}

			.block1 {
				--outline: .2em solid;
			}
		</style>
		<div data-edit="contents css" class="blocks">
			<div class="block1">
				<div></div>
			</div>
			<div class="block2">
				<div></div>
			</div>
		</div>
	</article>

	<article class="takeaway slide">
		<h1>CSS Variables are <br>inherited properties<div class="delayed note">but you can change that</div></h1>
	</article>

	<article class="slide" id="default-values">
		<div class="delayed-children">
			<div style="background: red">No CSS variables support</div>
			<div style="background: orange">No --accent-color set</div>
			<div style="background: yellowgreen">--accent-color: yellowgreen</div>
			<div style="background: transparent; border: 1px dashed gray">--accent-color: 42deg</div>
		</div>

		<pre style="margin-top: 2em; overflow: visible"><code>
			background: red;
			background: var(--accent-color, orange);
		</code></pre>
	</article>

	<article class="takeaway slide">
		<h1><em>Invalid at computed-value time</em> = initial</h1>
	</article>

	<article class="demo slide" id="cycles">
		<style data-slide data-scope=".blocks">
			div {
				--size: 8em;
				height: var(--size);
			}

			.declarative {
				filter: invert();
			}
		</style>

		<div class="blocks" data-edit="css contents">
			<div>CSS is awesome</div>
			<div class="declarative">CSS is declarative</div>
		</div>
	</article>

	<article class="takeaway slide">
		<h1>Cycles make variables invalid <br> at computed-value time</h1>
	</article>

	<article class="horizontal demo slide">
		<p class="hint">Show division not working</p>
		<style data-slide>
			.block {
				width: 33vw;
				height: 33vh;
			}
		</style>
		<h1 class="block" data-edit="css html">Variable values are token lists</h1>
	</article>

	<article class="slide">
		<table>
			<tr>
				<td>Number ‚Üí unit: </td>
				<td><code class="language-css">calc(var(--foo) * 1px)</code></td>
			</tr>
			<tr>
				<td>Unit ‚Üí number:</td>
				<td style="font-size: 100px"><span class="poop"></span><span class="poop"></span><span class="poop"></span></td>
			</tr>
		</table>
	</article>

	<article class="takeaway slide">
		<h1>Use variables for pure data, <br>not CSS values</h1>
	</article>

	<article class="horizontal demo slide" id="animation" data-edit="css" style="--division: 70">
		<p class="hint">Try to animate --color | show that var() is ok</p>
		<style data-slide>
			@keyframes bg {
				from { background-color: yellow; }
				to { background-color: #0ca; }
			}

			#animation.slide {
				animation: 1s bg infinite alternate;
			}
		</style>
		<h1>CSS Variables in @keyframes?</h1>
	</article>

	<article class="slide">
		<blockquote style="width: 21em">
			<p>[CSS variables] can even be <strong>tran&shy;sitioned or ani&shy;mated</strong>, but since the UA has no way to interpret their con&shy;tents, <strong>they always use the "flips at 50%"</strong> behav&shy;ior that is used for any oth&shy;er pair of val&shy;ues that can‚Äôt be intelligently interpolated.</p>
			<p class="cite">‚Äî <a href="https://w3.org/TR/css-variables-1/">CSS Custom Properties for Cascading Variables Module Level 1</a></p>
		</blockquote>
	</article>

	<article class="future slide" id="registerProperty">
		<h1>üîÆ Near Future üîÆ</h1>
		<pre><code class="language-javascript" id="registerPropertyCode" contentEditable style="outline: none">
			CSS.registerProperty({
				name: "--color",
				syntax: "&lt;color>",
				initialValue: "black",
				inherits: false
			});
		</code></pre>
		<button onclick="eval(registerPropertyCode.textContent)" class="run delayed">Run!</button>
	</article>

	<article class="slide" data-import="animation"></article>

	<article class="browser-support slide">
		<table>
			<thead>
				<tr>
					<th></th>
					<th><img src="img/chrome-logo.svg" alt="Chrome"></th>
					<th><img src="img/firefox-logo.svg" alt="Firefox"></th>
					<th><img src="img/edge-logo.svg" alt="Edge"></th>
					<th><img src="img/safari-logo.png" alt="Safari"></th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th>CSS.registerProperty()</th>
					<td class="incomplete">‚õ≥Ô∏è</td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</tbody>
		</table>
	</article>

	<article class="takeaway slide">
		<h1>CSS variables <span class="plus">+</span> animations <span class="equals">=</span>üîÆ<span class="heart" style="font-size: 90px;">‚ô•Ô∏è</span></h1>
	</article>
</section>

<section>





	<article class="slide demo" id="responsive" data-edit="css">
		<section></section>
		<section></section>
		<section></section>

		<section class="wide3"></section>

		<section class="wide2"></section>
		<section></section>
		<style data-slide>
		:root {
			--gutter: 2px;
		}

		section {
			margin: var(--gutter);
		}

		@media (min-width: 1000px) {
			:root {
				--gutter: 10px;
			}
		}
		</style>
	</article>

	<article class="takeaway slide">
		<h1>CSS Variables make <br>responsive design easier</h1>
	</article>
</section>

<section>
	<header class="slide">
		<h1>CSS Variables & SVG</h1>
	</header>

	<article class="horizontal demo slide" id="svg-eyes">
		<style data-slide>
			.iris {
				cx: 50px;
			}
		</style>
		<div data-edit="contents css">
			<svg viewBox="0 0 250 100">
				<clipPath id="white-clip">
					<path id="white-path" d="M1,50 a65,80 0 0,1 100,0 a80,80 0 0,1 -100,0 Z" />
				</clipPath>
				<use id="eye-white" href="#white-path" />
				<use href="#eye-white" x="148" />
				<circle id="iris" class="iris" cx="50" cy="45" r="18" clip-path="url(#white-clip)" />
				<use class="iris" href="#iris" x="148" />
			</svg>
		</div>
	</article>

	<article class="takeaway slide">
		<h1>CSS variables <span class="plus">+</span> SVG <span class="equals">=</span><span class="heart" style="font-size: 90px;">‚ô•Ô∏è</span></h1>
	</article>
</section>

<section>
	<header class="slide">
		<h1>CSS Variables & JavaScript</h1>
	</header>

	<article class="slide language-javascript" style="align-items: flex-start; padding: 3em">
		<pre><code>
			// Get variable from inline style
			element.style.getPropertyValue("--foo");
		</code></pre>
		<pre class="delayed"><code>
			// Get variable from wherever
			getComputedStyle(element).getPropertyValue("--foo");
		</code></pre>
		<pre class="delayed"><code>
			// Set variable on inline style
			element.style.setProperty("--foo", 38 + 4);
		</code></pre>
	</article>

	<article class="slide">
		<pre><code class="language-javascript">
			var root = document.documentElement;

			document.addEventListener("mousemove", evt => {
				let x = evt.clientX / innerWidth;
				let y = evt.clientY / innerHeight;

				root.style.setProperty("--mouse-x", x);
				root.style.setProperty("--mouse-y", y);
			});
		</code></pre>
	</article>

	<article class="horizontal demo slide" data-edit="css" id="mouse">
		<style data-slide>
			#mouse.slide {
				background-image: radial-gradient(
					at 50% 50%,
					transparent, black);
			}
		</style>
	</article>

	<article class="slide" data-import="svg-eyes"></article>

	<article class="language-javascript slide">
		<div><pre><code>
			for (input of document.querySelectorAll("input")) {
				input.style.setProperty("--value", input.value);
			}
		</code></pre>
		<pre class="delayed"><code>
			document.addEventListener("input", evt => {
				var input = evt.target;
				input.style.setProperty("--value", input.value);
			});
		</code></pre></div>
	</article>

	<article class="horizontal demo slide" id="slider">
		<style data-slide>
			input {
				appearance: none;
				background: linear-gradient(to right, #f06 50%, white 0);
			}
		</style>
		<style data-slide>
			input {
				width: 300px;
				-webkit-appearance: none;
				transform: scale(3);
				transform-origin: top;
				border-radius: .1em;
			}
		</style>
		<input type="range" data-edit="html css">
	</article>

	<article class="slide">
		<pre><code class="language-javascript">
			for (let el of document.querySelectorAll(".scrolling")) {
				el.addEventListener("scroll", evt => {
					let maxScroll = el.scrollHeight - el.offsetHeight;
					let scroll = el.scrollTop / maxScroll;
					el.style.setProperty("--scroll", scroll);
				});
			}
		</code></pre>
	</article>

	<article class="horizontal demo slide">
		<style data-slide>
			.scrolling {
				background-image: linear-gradient(to right,
					white 20%, transparent 0)
			}
		</style>
		<div class="scrolling" data-edit="css html">
			<p>The allowed syntax for custom properties is extremely permissive. The &lt;declaration-value> production matches any sequence of one or more tokens, so long as the sequence does not contain &lt;bad-string-token>, &lt;bad-url-token>, unmatched &lt;)-token>, &lt;]-token>, or &lt;}-token>, or top-level &lt;semicolon-token> tokens or &lt;delim-token> tokens with a value of "!".</p>
			<p>In addition, if the value of a custom property contains a var() reference, the var() reference must be valid according to the specified var() grammar. If not, the custom property is invalid and must be ignored.</p>
			<p>The values of custom properties, and the values of var() functions substituted into custom properties, are case-sensitive, and must be preserved in their original author-given casing. (Many CSS values are ASCII case-insensitive, which user agents can take advantage of by "canonicalizing" them into a single casing, but that isn‚Äôt allowed for custom properties.)
			<p>The initial value of a custom property is an empty value; that is, nothing at all. This initial value has a special interaction with the var() notation, which is explained in the section defining var().
			<p>Custom properties are ordinary properties, so they can be declared on any element, are resolved with the normal inheritance and cascade rules, can be made conditional with @media and other conditional rules, can be used in HTML‚Äôs style attribute, can be read or set using the CSSOM, etc.
			<p>Notably, they can even be transitioned or animated, but since the UA has no way to interpret their contents, they always use the "flips at 50%" behavior that is used for any other pair of values that can‚Äôt be intelligently interpolated. However, any custom property used in a @keyframes rule becomes animation-tainted, which affects how it is treated when referred to via the var() function in an animation property.</p>
		</div>
	</article>

	<article class="takeaway slide">
		<h1>CSS Variables are a revolution for <br>separation of style and behavior</h1>
	</article>
</section>

<footer class="dark slide dont-resize">
	<img src="img/mark.svg" class="logo" />
	<h1>Thank you!</h1>

	<ul>
		<li style="--icon: 'üåç'"><a href="http://lea.verou.me">lea.verou.me</a></li>
		<li style="--icon: '‚úâ'"><a href="mailto:lea@verou.me">lea@verou.me</a></li>
		<li style="--icon: 'üê¶'"><a href="http://twitter.com/leaverou">@leaverou</a></li>
	</ul>

	<p>Slides: <a href="https://leaverou.github.io/talks/css-variables">leaverou.github.io/talks/intro</a></p>
	<p style="font-size: 50%;">This slide deck was entirely built with open web technologies! Slideshow framework: <a href="http://github.com/LeaVerou/CSSS">github.com/LeaVerou/CSSS</a></p>
</footer>

<script src="js/bliss.min.js"></script>
<script src="../csss/slideshow.js"></script>
<script src="js/prism.js"></script>
<script src="../incrementable/incrementable.js"></script>
<script src="../shared/js/editor.js"></script>
<script src="js/talk.js"></script>

</body>
</html>
